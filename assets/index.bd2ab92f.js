import{S as q,i as M,s as z,e as g,t as w,a as p,b as k,c as h,d as I,f as y,g as H,h as L,j as O,n as v,k as S,l as R,m as C,o as T,p as j,q as P,r as A,u as Z,v as x,w as $,x as ee,y as te,z as ne}from"./vendor.467b98c4.js";const le=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=l(t);fetch(t.href,o)}};le();function B(i,e,l){const n=i.slice();return n[5]=e[l],n}function E(i){let e,l,n=i[1]+1+"",t;return{c(){e=g("p"),l=w("#"),t=w(n),p(e,"class","card__text svelte-tu8bs5")},m(o,s){k(o,e,s),h(e,l),h(e,t)},p(o,s){s&2&&n!==(n=o[1]+1+"")&&I(t,n)},d(o){o&&y(e)}}}function K(i){let e,l=i[3],n=[];for(let t=0;t<l.length;t+=1)n[t]=W(B(i,l,t));return{c(){e=g("div");for(let t=0;t<n.length;t+=1)n[t].c();p(e,"class","card__text svelte-tu8bs5")},m(t,o){k(t,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(t,o){if(o&8){l=t[3];let s;for(s=0;s<l.length;s+=1){const c=B(t,l,s);n[s]?n[s].p(c,o):(n[s]=W(c),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(t){t&&y(e),H(n,t)}}}function W(i){let e,l=i[5].name+"",n;return{c(){e=g("span"),n=w(l)},m(t,o){k(t,e,o),h(e,n)},p(t,o){o&8&&l!==(l=t[5].name+"")&&I(n,l)},d(t){t&&y(e)}}}function Y(i){let e,l,n;return{c(){e=g("div"),l=g("a"),n=w("Open"),p(l,"class","spoty-btn spoty-btn-sm spoty-btn-primary svelte-tu8bs5"),p(l,"href",i[4]),p(l,"target","_black"),p(e,"class","card__text svelte-tu8bs5")},m(t,o){k(t,e,o),h(e,l),h(l,n)},p(t,o){o&16&&p(l,"href",t[4])},d(t){t&&y(e)}}}function oe(i){let e,l,n,t,o,s,c,r,d,_,m=i[1]&&E(i),u=i[3]&&K(i),a=i[4]&&Y(i);return{c(){e=g("div"),l=g("img"),t=L(),o=g("div"),m&&m.c(),s=L(),c=g("span"),r=w(i[2]),d=L(),u&&u.c(),_=L(),a&&a.c(),O(l.src,n=i[0])||p(l,"src",n),p(l,"class","card__image svelte-tu8bs5"),p(l,"alt","brown couch"),p(c,"class","card__title svelte-tu8bs5"),p(o,"class","card__content svelte-tu8bs5"),p(e,"class","card svelte-tu8bs5")},m(f,b){k(f,e,b),h(e,l),h(e,t),h(e,o),m&&m.m(o,null),h(o,s),h(o,c),h(c,r),h(o,d),u&&u.m(o,null),h(o,_),a&&a.m(o,null)},p(f,[b]){b&1&&!O(l.src,n=f[0])&&p(l,"src",n),f[1]?m?m.p(f,b):(m=E(f),m.c(),m.m(o,s)):m&&(m.d(1),m=null),b&4&&I(r,f[2]),f[3]?u?u.p(f,b):(u=K(f),u.c(),u.m(o,_)):u&&(u.d(1),u=null),f[4]?a?a.p(f,b):(a=Y(f),a.c(),a.m(o,null)):a&&(a.d(1),a=null)},i:v,o:v,d(f){f&&y(e),m&&m.d(),u&&u.d(),a&&a.d()}}}function se(i,e,l){let{cover:n}=e,{index:t}=e,{name:o}=e,{artists:s}=e,{url:c}=e;return i.$$set=r=>{"cover"in r&&l(0,n=r.cover),"index"in r&&l(1,t=r.index),"name"in r&&l(2,o=r.name),"artists"in r&&l(3,s=r.artists),"url"in r&&l(4,c=r.url)},[n,t,o,s,c]}class ie extends q{constructor(e){super();M(this,e,se,oe,z,{cover:0,index:1,name:2,artists:3,url:4})}}let N="spotify_auth_state",U={Years:"long_term",Months:"medium_term",Weeks:"short_term"};function re(){window.document.body.classList.toggle("dark")}function ce(){let i={},e,l=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(;e=l.exec(n);)i[e[1]]=decodeURIComponent(e[2]);return i}function ae(i){let e="";const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<i;n++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}function ue(){let i="e0df5d5670e54d19bab0026e3f80896b",e=window.location.origin+window.location.pathname,l=ae(16);localStorage.setItem(N,l);let n="user-top-read",t="https://accounts.spotify.com/authorize";return t+="?response_type=token",t+="&client_id="+encodeURIComponent(i),t+="&scope="+encodeURIComponent(n),t+="&redirect_uri="+encodeURIComponent(e),t+="&state="+encodeURIComponent(l),t}async function fe(i){return typeof i=="undefined"?null:await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+i}}).then(e=>e.json())}async function F(i,e,l,n,t){if(typeof i=="undefined")return[];let o="time_range="+l;return o+="&offset="+n,o+="&limit="+t,await fetch("https://api.spotify.com/v1/me/top/"+e+"?"+o,{headers:{Accept:"application/json",Authorization:"Bearer "+i,"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>s.items?s.items:[]).catch(s=>(localStorage.removeItem(N),console.log(s),[]))}function D(i,e,l){const n=i.slice();return n[13]=e[l],n[15]=l,n}function _e(i){let e;return{c(){e=g("h1"),e.textContent="Hey\u{1F919}, check out your spotify top songs, please login before continue",p(e,"class","page__title svelte-1t7ngnu")},m(l,n){k(l,e,n)},p:v,d(l){l&&y(e)}}}function me(i){let e,l,n,t,o=i[1].display_name+"",s,c,r,d;return{c(){e=g("h1"),l=w("Hello "),n=g("span"),n.textContent="\u{1F590}",t=w(" \uFE0F "),s=w(o),c=w(`, here\r
      your top spotify songs`),p(n,"class","svelte-1t7ngnu"),p(e,"class","page__title svelte-1t7ngnu")},m(_,m){k(_,e,m),h(e,l),h(e,n),h(e,t),h(e,s),h(e,c),r||(d=j(n,"click",re),r=!0)},p(_,m){m&2&&o!==(o=_[1].display_name+"")&&I(s,o)},d(_){_&&y(e),r=!1,d()}}}function de(i){let e,l,n,t,o,s,c,r,d,_,m,u,a={ctx:i,current:null,token:null,hasCatch:!0,pending:ye,then:be,catch:he,value:12,error:16,blocks:[,,,]};return P(d=i[2],a),{c(){e=g("div"),l=g("button"),l.textContent="Several years",n=L(),t=g("button"),t.textContent="Last 6 months",o=L(),s=g("button"),s.textContent="Last 4 weeks",c=L(),r=A(),a.block.c(),p(l,"class","spoty-btn spoty-btn-sm spoty-btn-primary svelte-1t7ngnu"),p(t,"class","spoty-btn spoty-btn-sm spoty-btn-primary svelte-1t7ngnu"),p(s,"class","spoty-btn spoty-btn-sm spoty-btn-primary svelte-1t7ngnu"),Z(e,"margin","auto"),p(e,"class","svelte-1t7ngnu")},m(f,b){k(f,e,b),h(e,l),h(e,n),h(e,t),h(e,o),h(e,s),k(f,c,b),k(f,r,b),a.block.m(f,a.anchor=b),a.mount=()=>r.parentNode,a.anchor=r,_=!0,m||(u=[j(l,"click",i[6]),j(t,"click",i[7]),j(s,"click",i[8])],m=!0)},p(f,b){i=f,a.ctx=i,b&4&&d!==(d=i[2])&&P(d,a)||x(a,i,b)},i(f){_||(C(a.block),_=!0)},o(f){for(let b=0;b<3;b+=1){const X=a.blocks[b];S(X)}_=!1},d(f){f&&y(e),f&&y(c),f&&y(r),a.block.d(f),a.token=null,a=null,m=!1,$(u)}}}function pe(i){let e,l,n;return{c(){e=g("button"),e.textContent="Log in with Spotify",p(e,"class","spoty-btn spoty-btn-sm spoty-btn-primary svelte-1t7ngnu")},m(t,o){k(t,e,o),l||(n=j(e,"click",i[3]),l=!0)},p:v,i:v,o:v,d(t){t&&y(e),l=!1,n()}}}function he(i){let e,l=i[16]+"",n;return{c(){e=g("p"),n=w(l),p(e,"class","svelte-1t7ngnu")},m(t,o){k(t,e,o),h(e,n)},p(t,o){o&4&&l!==(l=t[16]+"")&&I(n,l)},i:v,o:v,d(t){t&&y(e)}}}function be(i){let e,l,n,t;const o=[ke,ge],s=[];function c(r,d){return r[12].length>0?0:1}return e=c(i),l=s[e]=o[e](i),{c(){l.c(),n=A()},m(r,d){s[e].m(r,d),k(r,n,d),t=!0},p(r,d){let _=e;e=c(r),e===_?s[e].p(r,d):(T(),S(s[_],1,1,()=>{s[_]=null}),R(),l=s[e],l?l.p(r,d):(l=s[e]=o[e](r),l.c()),C(l,1),l.m(n.parentNode,n))},i(r){t||(C(l),t=!0)},o(r){S(l),t=!1},d(r){s[e].d(r),r&&y(n)}}}function ge(i){let e;return{c(){e=g("h1"),e.textContent="No data found",p(e,"class","svelte-1t7ngnu")},m(l,n){k(l,e,n)},p:v,i:v,o:v,d(l){l&&y(e)}}}function ke(i){let e,l,n=i[12],t=[];for(let s=0;s<n.length;s+=1)t[s]=G(D(i,n,s));const o=s=>S(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=A()},m(s,c){for(let r=0;r<t.length;r+=1)t[r].m(s,c);k(s,e,c),l=!0},p(s,c){if(c&4){n=s[12];let r;for(r=0;r<n.length;r+=1){const d=D(s,n,r);t[r]?(t[r].p(d,c),C(t[r],1)):(t[r]=G(d),t[r].c(),C(t[r],1),t[r].m(e.parentNode,e))}for(T(),r=n.length;r<t.length;r+=1)o(r);R()}},i(s){if(!l){for(let c=0;c<n.length;c+=1)C(t[c]);l=!0}},o(s){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)S(t[c]);l=!1},d(s){H(t,s),s&&y(e)}}}function G(i){let e,l;return e=new ie({props:{cover:i[13].album.images[0].url,name:i[13].name,artists:i[13].artists,url:i[13].external_urls.spotify,index:i[15]}}),{c(){ee(e.$$.fragment)},m(n,t){te(e,n,t),l=!0},p(n,t){const o={};t&4&&(o.cover=n[13].album.images[0].url),t&4&&(o.name=n[13].name),t&4&&(o.artists=n[13].artists),t&4&&(o.url=n[13].external_urls.spotify),e.$set(o)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){ne(e,n)}}}function ye(i){let e;return{c(){e=g("div"),e.innerHTML='<div class="ldio-z6h7l1lpshs svelte-1t7ngnu"><div class="svelte-1t7ngnu"></div></div>',p(e,"class","loadingio-spinner-rolling-xjk8h47j69 svelte-1t7ngnu")},m(l,n){k(l,e,n)},p:v,i:v,o:v,d(l){l&&y(e)}}}function ve(i){let e,l,n,t,o;function s(u,a){return u[1]?me:_e}let c=s(i),r=c(i);const d=[pe,de],_=[];function m(u,a){return u[0]==null?0:1}return n=m(i),t=_[n]=d[n](i),{c(){e=g("main"),r.c(),l=L(),t.c(),p(e,"class","svelte-1t7ngnu")},m(u,a){k(u,e,a),r.m(e,null),h(e,l),_[n].m(e,null),o=!0},p(u,[a]){c===(c=s(u))&&r?r.p(u,a):(r.d(1),r=c(u),r&&(r.c(),r.m(e,l)));let f=n;n=m(u),n===f?_[n].p(u,a):(T(),S(_[f],1,1,()=>{_[f]=null}),R(),t=_[n],t?t.p(u,a):(t=_[n]=d[n](u),t.c()),C(t,1),t.m(e,null))},i(u){o||(C(t),o=!0)},o(u){S(t),o=!1},d(u){u&&y(e),r.d(),_[n].d()}}}let J=20,Q=0,V="tracks";function we(i,e,l){function n(){window.location=ue()}let t=ce(),o=t.access_token,s=t.state,c=localStorage.getItem(N),r=null;o&&(typeof s=="undefined"||s!==c)?(alert("There was an error during the authentication"),o=null):typeof o!="undefined"&&fe(o).then(b=>l(1,r=b));let d="long_term",_=Promise.resolve([]);o!=null&&(_=F(o,V,d,Q,J).catch(()=>[]));function m(b){l(5,d=b)}const u=()=>m(U.Years),a=()=>m(U.Months),f=()=>m(U.Weeks);return i.$$.update=()=>{i.$$.dirty&33&&l(2,_=F(o,V,d,Q,J).catch(()=>[]))},[o,r,_,n,m,d,u,a,f]}class Ce extends q{constructor(e){super();M(this,e,we,ve,z,{})}}new Ce({target:document.getElementById("app")});
